"use strict";$(function(){$.validator.addMethod("checkPhone",function(e,r,t){return!!/^1[3,5,7,8]\d{9}$/g.test(e)},"手机号格式不正确！"),$.validator.addMethod("checkPwd",function(e,r,t){return!!/^\w{6,12}$/g.test(e)},"密码只允许6-12位英文字母、数字和下划线"),$(".registerform").validate({rules:{phone:{required:!0,checkPhone:!0,remote:{type:"post",url:"./serve/isRegister.php",data:{phone:function(){return $(".phone").val()}}}},password:{required:!0,minlength:6,maxlength:12},repwd:{equalTo:"#password"}},messages:{phone:{required:"账号不能为空",remote:"手机号已经存在!"},password:{required:"密码不能为空",minlength:"密码最少6位",maxlength:"密码最多12位",checkPwd:!0},repwd:{equalTo:"密码不一致"}},focusInvalid:!0,submitHandler:function(e,r){r.stopPropagation(),$(".cb_inp")[0].checked?(e=queryParser($(e).serialize()),$.post("./serve/register.php",e,function(e){1==e.code?layer.confirm("用户注册成功",{btn:["关闭"]},function(){location.reload()}):layer.alert("用户注册失败",{icon:2})},"json")):layer.alert("请先同意用户协议")}}),$(".cb_inp").on("click",function(){this.checked?$(".sub_btn").addClass("active"):$(".sub_btn").removeClass("active")})});